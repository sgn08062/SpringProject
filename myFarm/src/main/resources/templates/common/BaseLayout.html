<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>

<body>

<header th:fragment="mainHeader(userName, isLoggedIn)">
    <div class="header-container">
        <a th:href="@{/user/list}" class="logo-link">
            <div class="logo"> <img th:src="@{/img/main_icon.png}" alt="ë†ì¥ì§ì†¡ ë¡œê³ "> <span>ë†ì¥ì§ì†¡</span> </div>
        </a>
        <div class="header-top">
            <h2 th:text="${userName} != null ? ${userName} + 'ë‹˜ ì•ˆë…•í•˜ì„¸ìš”' : 'ê²ŒìŠ¤íŠ¸ë‹˜ ì•ˆë…•í•˜ì„¸ìš”'"></h2>

            <th:block th:if="${isLoggedIn}">
                <a href="/user/address/">ë°°ì†¡ì§€ê´€ë¦¬</a>
                <a th:href="@{/uorder/list}">êµ¬ë§¤ëª©ë¡</a>
                <a th:href="@{/cart}">ì¥ë°”êµ¬ë‹ˆ</a>
            </th:block>

            <th:block th:if="${!isLoggedIn}">
                <a th:href="@{/account/login}" id="loginModalBtn">ë¡œê·¸ì¸</a>
                <a th:href="@{/register}">íšŒì›ê°€ì…</a>
            </th:block>

            <a th:id="logoutBtn" th:if="${isLoggedIn}">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
    </div>
</header>

<header th:fragment="subHeader" style="width: 100%; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);">
    <div class="header-container" style="
        width: 100%;
        max-width: none !important;
        margin: 0 !important;
        padding: 5px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-sizing: border-box;
    ">

        <a th:href="@{/user/list}" class="logo-link">
            <div class="logo"> <img th:src="@{/img/main_icon.png}" alt="ë†ì¥ì§ì†¡ ë¡œê³ "> <span>ë†ì¥ì§ì†¡</span> </div>
        </a>
        <div class="header-top">
            <a href="/user/address/">ë°°ì†¡ì§€ê´€ë¦¬</a>
            <a th:href="@{/uorder/list}">êµ¬ë§¤ëª©ë¡</a>
            <a th:href="@{/cart}">ì¥ë°”êµ¬ë‹ˆ</a>

            <a th:id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
    </div>
</header>


<footer class="main-footer" th:fragment="mainFooter">
    <div class="footer-content">
        <div class="footer-section">
            <h3>ë†ì¥ì§ì†¡</h3>
            <p>ì‹ ì„ í•œ ë†ì‚°ë¬¼ì„ ë†ì¥ì—ì„œ ì§ì ‘ ì†Œë¹„ìì—ê²Œ ì „ë‹¬í•˜ëŠ” ì§ê±°ë˜ í”Œë«í¼ì…ë‹ˆë‹¤.</p>
        </div>
        <div class="footer-section">
            <h3>ê³ ê°ì„¼í„°</h3>
            <p>ğŸ“ 1588-1234</p>
            <p>âœ‰ï¸ support@farm.com</p>
        </div>
        <div class="footer-section">
            <a th:href="@{/user/order}">ì£¼ë¬¸ ëª©ë¡</a>
            <a href="#">ì´ìš©ì•½ê´€</a>
            <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
        </div>
        <div class="footer-section">
            <h3>íšŒì‚¬ ì •ë³´</h3>
            <p>ğŸ“ ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123</p>
            <p>ëŒ€í‘œì´ì‚¬ : ê¹€ë†ë¶€</p>
        </div>
    </div>
</footer>

<div th:fragment="loginModal">
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close login-close">&times;</span>
            <h2>ë¡œê·¸ì¸</h2>
            <form th:action="@{/login}" method="post">
                <label for="loginId">ì•„ì´ë””</label>
                <input type="text" id="loginId" name="loginId" required>

                <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="password" name="userPw" required>
                <button type="submit">ë¡œê·¸ì¸</button>
            </form>
            <p style="text-align: center; margin-top: 15px;">
                <a th:href="@{/find-password}" style="color: #007bff;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a> |
                <a th:href="@{/register}" style="color: #007bff;">íšŒì›ê°€ì…</a>
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let loginModal = document.getElementById("loginModal");
            let loginBtn = document.getElementById("loginModalBtn");
            let loginClose = document.querySelector("#loginModal .close");

            if(loginBtn && loginModal) {
                loginBtn.onclick = function(event) {
                    event.preventDefault();
                    loginModal.style.display = "block";
                }
            }
            if(loginClose && loginModal) {
                loginClose.onclick = function() {
                    loginModal.style.display = "none";
                }
            }

            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            window.onclick = function(event) {
                if (event.target == loginModal) {
                    loginModal.style.display = "none";
                }
            }
        });
    </script>
</div>

</body>
</html>