DB info : tester/tester
Port info : 8383

- create user query (root에서 실행할 것)
#> create user tester identified by 'tester';
#> create database tester default character set 'utf8';
#> grant all privileges on tester.* to tester;

- dummy data 추가(cart 기능 테스트시 필수)

$> INSERT INTO CROP (UUID, CROP_NAME, STATUS, GROWTH_TIME, QUANTITY, UNIT_NAME) VALUES
('UUID_001', '유기농 토마토', 1, 90, 50, '개'),
('UUID_002', '친환경 상추', 1, 30, 0, '개'), -- 재고 0 (품절 테스트용)
('UUID_003', '무농약 당근', 1, 60, 100, '개'),
('UUID_004', '꿀 사과', 1, 120, 80, '개'),
('UUID_005', '제주 감귤', 1, 100, 120, '개');


$> INSERT INTO USERS (USER_ID, LOGIN_ID, USER_PW, USER_NAME, AUTH)
VALUES (1, 'testuser', '1234', '테스터', 'CONSUMER');

$>INSERT INTO CROP (UUID, CROP_NAME, STATUS, GROWTH_TIME, QUANTITY, UNIT_NAME)
  VALUES ('UUID_001', '유기농 토마토', 1, 60, 100, '개');

$>INSERT INTO INVENTORY (AMOUNT, UUID) VALUES (100, 'UUID_001');

$>INSERT INTO SHOP (ITEM_ID, ITEM_NAME, PRICE, STOR_ID)
  VALUES (1, '유기농 토마토', 5000, 1);


- DDL Query

CREATE TABLE USERS(
	USER_ID INT NOT NULL AUTO_INCREMENT,
    LOGIN_ID VARCHAR(50) NOT NULL UNIQUE,
    USER_PW VARCHAR(15) NOT NULL,
    USER_NAME VARCHAR(10) NOT NULL,
    PHONE VARCHAR(20) UNIQUE,
    EMAIL VARCHAR(255) UNIQUE,
    AUTH ENUM('ADMIN', 'CONSUMER') NOT NULL DEFAULT 'CONSUMER',
    PRIMARY KEY (USER_ID)
);

CREATE TABLE ADDRESS (
    ADD_ID INT NOT NULL AUTO_INCREMENT,
    ADDRESS VARCHAR(255),
    ADD_NAME VARCHAR(20),
    USER_ID INT NOT NULL,
    PRIMARY KEY (ADD_ID),
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID)
);


CREATE TABLE CROP (
	UUID VARCHAR(255) NOT NULL,
    CROP_NAME VARCHAR(20) NOT NULL,
    REG_DATE DATE NOT NULL DEFAULT (CURRENT_DATE),
    STATUS TINYINT DEFAULT 0,
    GROWTH_TIME INT,
    QUANTITY INT,
    UNIT_NAME VARCHAR(10),
    ELAPSED_TICK INT NOT NULL DEFAULT 0,
    PRIMARY KEY (UUID)
);
select * from crop;

CREATE TABLE INVENTORY (
    STOR_ID INT NOT NULL AUTO_INCREMENT,
    AMOUNT INT NOT NULL DEFAULT 0,
    UUID VARCHAR(255) NOT NULL,
    PRIMARY KEY (STOR_ID),
    FOREIGN KEY (UUID) REFERENCES CROP(UUID)
);
select * from inventory;
CREATE TABLE SHOP (
    ITEM_ID INT NOT NULL AUTO_INCREMENT,
    ITEM_NAME VARCHAR(10),
    PRICE INT NOT NULL DEFAULT 0,
    STOR_ID INT NOT NULL,
    PRIMARY KEY (ITEM_ID),
    FOREIGN KEY (STOR_ID) REFERENCES INVENTORY(STOR_ID)
);

CREATE TABLE CART (
    USER_ID INT NOT NULL,
    ITEM_ID INT NOT NULL,
    AMOUNT INT NOT NULL DEFAULT 1,
    PRIMARY KEY (USER_ID, ITEM_ID),
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    FOREIGN KEY (ITEM_ID) REFERENCES SHOP(ITEM_ID)
);

CREATE TABLE ORDERS (
    ORDER_ID INT NOT NULL AUTO_INCREMENT,
    STATUS ENUM('주문 대기', '배송 중') NOT NULL,
    ADDRESS VARCHAR(255),
    PHONE VARCHAR(15),
    USER_ID INT NOT NULL,
    PRIMARY KEY (ORDER_ID),
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID)
);

CREATE TABLE ORDER_AMOUNT (
    ORDER_ID INT NOT NULL,
    ITEM_ID INT NOT NULL,
    AMOUNT INT NOT NULL DEFAULT 1,
    UNIT_PRICE INT NOT NULL DEFAULT 0,
    PRIMARY KEY (ORDER_ID, ITEM_ID),
    FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID),
    FOREIGN KEY (ITEM_ID) REFERENCES SHOP(ITEM_ID)
);
